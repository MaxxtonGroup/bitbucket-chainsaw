<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
	<plugin-info>
		<description>${project.description}</description>
		<version>${project.version}</version>
		<vendor name="${project.organization.name}" url="${project.organization.url}"/>
		<param name="plugin-icon">images/pluginIcon.png</param>
		<param name="plugin-logo">images/pluginLogo.png</param>
	</plugin-info>
	<!-- add our i18n resource -->
	<resource type="i18n" name="i18n" location="chainsaw"/>

	<servlet name="Chainsaw Servlet" i18n-name-key="chainsaw-servlet.name" key="chainsaw-servlet" class="com.michielroos.bitbucket.servlet.ChainsawServlet">
		<description key="chainsaw-servlet.description">The Chainsaw Servlet Plugin
		</description>
		<url-pattern>/michielroos/chainsaw/repository/*</url-pattern>
	</servlet>

	<web-item name="Chainsaw" i18n-name-key="chainsaw.name" key="bitbucket.repository.nav.chainsaw" section="bitbucket.repository.nav" weight="1000">
		<description key="chainsaw.description">Repository navigation item</description>
		<conditions type="AND">
			<!--&lt;!&ndash; Pull requests are only visible if the backing SCM supports them &ndash;&gt;-->
			<!--<condition class="com.atlassian.bitbucket.web.conditions.IsScmFeatureSupportedCondition">-->
				<!--<param name="feature">PULL_REQUESTS</param>-->
			<!--</condition>-->
			<!-- Pull requests are only visible to logged-in users -->
			<condition class="com.atlassian.bitbucket.web.conditions.HasRepositoryPermissionCondition">
				<param name="permission">REPO_READ</param>
			</condition>
			<condition class="com.atlassian.bitbucket.web.conditions.RepositoryNotEmptyCondition"/>
		</conditions>
		<label key="chainsaw.label"/>
		<link linkId="repository-nav-chainsaw">/plugins/servlet/michielroos/chainsaw/repository/${repository.project.key}/${repository.slug}</link>
		<tooltip key="chainsaw.tooltip"/>
		<!-- optional style for the icon: see https://design.atlassian.com/2.0/product/foundations/iconography for a list of available images -->
		<param name="iconClass" value="aui-icon-small aui-iconfont-edit"/>
	</web-item>
</atlassian-plugin>
